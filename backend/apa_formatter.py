"""
apa_formatter.py

Модуль для форматирования библиографической ссылки по стандарту APA.
Функция format_apa принимает строку библиографической записи, проводит базовый анализ и возвращает корректное оформление.

Пример APA для статьи:
  Author, A. A., & Author, B. B. (Year). Title of article. Title of Periodical, volume(issue), pages. https://doi.org/xx.xxx/yyyy

Если каких-то данных не хватает, функция возвращает сообщение с указанием недостатка информации.
"""

def format_apa(reference: str) -> str:
    """
    Форматирует библиографическую ссылку в стиль APA.
    
    Аргументы:
        reference (str): Исходная библиографическая запись.
    
    Возвращает:
        str: Строка с оформленной ссылкой по стандарту APA или сообщение об ошибке.
    """
    if not reference.strip():
        return "Ошибка: Пустая библиографическая запись."

    # Простейшая логика разбора записи.
    # Предполагается, что входная запись содержит основные элементы, разделённые запятыми:
    # Автор, Год, Название, Остальные данные (журнал, том, номер, страницы, doi/ISSN и т.д.)
    parts = [part.strip() for part in reference.split(',')]
    if len(parts) < 4:
        return "Ошибка: Недостаточно данных для формирования записи по APA. Проверьте входную запись."

    # Извлекаем элементы (данные можно дорабатывать, добавляя более сложную обработку)
    author = parts[0]
    year = parts[1]
    title = parts[2]
    # Остальные элементы объединяем в один блок
    rest = ', '.join(parts[3:])

    # Простейший пример форматирования:
    # В действительности оформление должно учитывать пунктуацию, скобки для года, курсив для названий журналов и т.д.
    formatted = f"{author} ({year}). {title}. {rest}"
    
    # Добавляем пометку, что запись оформлена по стандарту APA
    return f"APA: {formatted}"


# Пример тестирования:
if __name__ == "__main__":
    test_reference = "Smith, J., 2020, Advances in AI, Journal of Modern Science, 10, 2, 123-130"
    print("Исходная запись:")
    print(test_reference)
    print("\nОтформатированная запись:")
    print(format_apa(test_reference))
